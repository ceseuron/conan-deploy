#!/bin/bash
# Conan Exiles server initialization script.

$basepath="/home/{{ conan_user}}/exiles"
tempmodpath="$basepath/modtmp"
modpath="$basepath/ConanSandbox/Mods"
modlist="$modpath/modlist.txt"
modids="$basepath/modids.txt"

# Install/Update Mods
for mod in `cat $modids`; do
  echo "Downloading mod ID: $mod"
  if ! /usr/games/steamcmd +@sSteamCmdForcePlatformType windows +force_install_dir $tempmodpath +login anonymous +workshop_download_item 440900 $mod +exit; then
    echo "Failed to download mod from Steam: $mod"
    exit 1
  fi
done

